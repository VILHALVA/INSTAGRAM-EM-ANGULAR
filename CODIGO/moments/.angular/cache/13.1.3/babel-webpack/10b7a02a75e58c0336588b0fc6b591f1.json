{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\HP\\\\Downloads\\\\GITHUB\\\\PROGRAMACAO\\\\02-PROJETOS PUBLICOS\\\\01-SITES\\\\INSTAGRAM EM ANGULAR\\\\CODIGO\\\\moments\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/moment/moment.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/messages/messages.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../moment-form/moment-form.component\";\n\nfunction EditMomentComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \" Editando o momento \");\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"! \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"app-moment-form\", 1);\n    i0.ɵɵlistener(\"onSubmit\", function EditMomentComponent_div_0_Template_app_moment_form_onSubmit_6_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.editHandler($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.moment.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"momentData\", ctx_r0.moment)(\"btnText\", ctx_r0.btnText);\n  }\n}\n\nexport class EditMomentComponent {\n  constructor(momentService, route, router, messagesService) {\n    this.momentService = momentService;\n    this.route = route;\n    this.router = router;\n    this.messagesService = messagesService;\n    this.btnText = 'Editar';\n  }\n\n  ngOnInit() {\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    this.momentService.getMoment(id).subscribe(item => {\n      this.moment = item.data;\n    });\n  }\n\n  editHandler(momentData) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const id = _this.moment.id;\n      const formData = new FormData();\n      formData.append('title', momentData.title);\n      formData.append('description', momentData.description);\n\n      if (momentData.image) {\n        formData.append('image', momentData.image);\n      }\n\n      yield _this.momentService.updateMoment(id, formData).subscribe();\n\n      _this.messagesService.add(`Momento ${id} atualizado com sucesso!`);\n\n      _this.router.navigate(['/']);\n    })();\n  }\n\n}\n\nEditMomentComponent.ɵfac = function EditMomentComponent_Factory(t) {\n  return new (t || EditMomentComponent)(i0.ɵɵdirectiveInject(i1.MomentService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MessagesService));\n};\n\nEditMomentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditMomentComponent,\n  selectors: [[\"app-edit-moment\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [3, \"momentData\", \"btnText\", \"onSubmit\"]],\n  template: function EditMomentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, EditMomentComponent_div_0_Template, 7, 3, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.moment);\n    }\n  },\n  directives: [i4.NgIf, i5.MomentFormComponent],\n  styles: [\"h2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 1em;\\n  font-size: 2.2em;\\n}\\n\\nh2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  color: #dec129;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXQtbW9tZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEIiLCJmaWxlIjoiZWRpdC1tb21lbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImgyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAxZW07XG4gIGZvbnQtc2l6ZTogMi4yZW07XG59XG5cbmgyIHNwYW4ge1xuICBjb2xvcjogI2RlYzEyOTtcbn1cbiJdfQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/HP/Downloads/GITHUB/PROGRAMACAO/02-PROJETOS PUBLICOS/01-SITES/INSTAGRAM EM ANGULAR/CODIGO/moments/src/app/components/pages/edit-moment/edit-moment.component.ts"],"names":["i0","i1","i2","i3","i4","i5","EditMomentComponent_div_0_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","EditMomentComponent_div_0_Template_app_moment_form_onSubmit_6_listener","$event","ɵɵrestoreView","ctx_r1","ɵɵnextContext","editHandler","ctx_r0","ɵɵadvance","ɵɵtextInterpolate","moment","title","ɵɵproperty","btnText","EditMomentComponent","constructor","momentService","route","router","messagesService","ngOnInit","id","Number","snapshot","paramMap","get","getMoment","subscribe","item","data","momentData","formData","FormData","append","description","image","updateMoment","add","navigate","ɵfac","EditMomentComponent_Factory","t","ɵɵdirectiveInject","MomentService","ActivatedRoute","Router","MessagesService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","EditMomentComponent_Template","ɵɵtemplate","directives","NgIf","MomentFormComponent","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/moment/moment.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"src/app/services/messages/messages.service\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"../../moment-form/moment-form.component\";\r\nfunction EditMomentComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r2 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelementStart(1, \"h2\");\r\n    i0.ɵɵtext(2, \" Editando o momento \");\r\n    i0.ɵɵelementStart(3, \"span\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(5, \"! \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(6, \"app-moment-form\", 1);\r\n    i0.ɵɵlistener(\"onSubmit\", function EditMomentComponent_div_0_Template_app_moment_form_onSubmit_6_listener($event) { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.editHandler($event); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate(ctx_r0.moment.title);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"momentData\", ctx_r0.moment)(\"btnText\", ctx_r0.btnText);\r\n} }\r\nexport class EditMomentComponent {\r\n    constructor(momentService, route, router, messagesService) {\r\n        this.momentService = momentService;\r\n        this.route = route;\r\n        this.router = router;\r\n        this.messagesService = messagesService;\r\n        this.btnText = 'Editar';\r\n    }\r\n    ngOnInit() {\r\n        const id = Number(this.route.snapshot.paramMap.get('id'));\r\n        this.momentService.getMoment(id).subscribe((item) => {\r\n            this.moment = item.data;\r\n        });\r\n    }\r\n    async editHandler(momentData) {\r\n        const id = this.moment.id;\r\n        const formData = new FormData();\r\n        formData.append('title', momentData.title);\r\n        formData.append('description', momentData.description);\r\n        if (momentData.image) {\r\n            formData.append('image', momentData.image);\r\n        }\r\n        await this.momentService.updateMoment(id, formData).subscribe();\r\n        this.messagesService.add(`Momento ${id} atualizado com sucesso!`);\r\n        this.router.navigate(['/']);\r\n    }\r\n}\r\nEditMomentComponent.ɵfac = function EditMomentComponent_Factory(t) { return new (t || EditMomentComponent)(i0.ɵɵdirectiveInject(i1.MomentService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MessagesService)); };\r\nEditMomentComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: EditMomentComponent, selectors: [[\"app-edit-moment\"]], decls: 1, vars: 1, consts: [[4, \"ngIf\"], [3, \"momentData\", \"btnText\", \"onSubmit\"]], template: function EditMomentComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, EditMomentComponent_div_0_Template, 7, 3, \"div\", 0);\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.moment);\r\n    } }, directives: [i4.NgIf, i5.MomentFormComponent], styles: [\"h2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 1em;\\n  font-size: 2.2em;\\n}\\n\\nh2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  color: #dec129;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXQtbW9tZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEIiLCJmaWxlIjoiZWRpdC1tb21lbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImgyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAxZW07XG4gIGZvbnQtc2l6ZTogMi4yZW07XG59XG5cbmgyIHNwYW4ge1xuICBjb2xvcjogI2RlYzEyOTtcbn1cbiJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}